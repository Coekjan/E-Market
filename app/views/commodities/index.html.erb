<p id="notice"><%= notice %></p>
<p id="alert"><%= alert %></p>

<h1>Commodities</h1>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Introduction</th>
      <th>Price</th>
      <th>Shop</th>
      <th>Categories</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @commodities.each do |commodity| %>
      <tr>
        <td><%= commodity.name %></td>
        <td><%= commodity.introduction %></td>
        <td><%= commodity.price %></td>
        <td><%= commodity.shop.name %></td>
        <td><%= commodity.categories.collect { |c| c.name }.reduce { |x, y| x + ", " + y } %></td>
        <td><%= link_to 'Show', commodity %></td>
        <% if current_account && current_account.id == commodity.shop.seller.account.id %>
          <td><%= link_to 'Edit', edit_commodity_path(commodity) %></td>
          <td><%= link_to 'Destroy', commodity, method: :delete, data: { confirm: 'Are you sure?' } %></td>
        <% else %>
          <td>---</td>
          <td>---</td>
        <% end %>
      </tr>
    <% end %>
  </tbody>
</table>

<% if current_account && current_account.role == "Seller" %>
  <%= link_to 'My Shop', seller_url(current_account.seller) %>
<% end %>